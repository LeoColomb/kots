spec:
  template:
    spec:
      volumes:
      - name: dev
        hostPath:
          path: __PROJECT_DIR__
          type: Directory
      - name: gocache
        hostPath:
          path: __PROJECT_DIR__/dev/.gocache
          type: Directory
      - name: gomodcache
        hostPath:
          path: __PROJECT_DIR__/dev/.gomodcache
          type: Directory
      containers:
      - name: kotsadm
        image: kotsadm-api-dev
        command: ["/bin/bash"]
        args: ["-c", "while true; do sleep 30; done;"]
        volumeMounts:
        - name: dev
          mountPath: /replicatedhq/kots # workdir in the container
        - name: gocache
          mountPath: /root/.cache/go-build
        - name: gomodcache
          mountPath: /go/pkg/mod
        env:
        # in order to serve from kotsadm-web even in embedded cluster
        - name: DISABLE_SPA_SERVING
          value: "1"
        - name: ENABLE_WEB_PROXY
          value: "1"
        livenessProbe: ~
        readinessProbe: ~
        resources: ~
        securityContext:
          runAsUser: 0
          runAsGroup: 0
          runAsNonRoot: false
